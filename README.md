# DC_Tracer
2020~2022 개인 프로젝트

수발광을 이용해서 경기장의 흰색 선에 발광의 적외선이 반사가 잘되어서 높아지는 수광값을 따라서 움직이도록 만든 로봇.
<img width="387" height="517" alt="image" src="https://github.com/user-attachments/assets/fa03974a-c2dc-4ae2-a4c3-a0472be90d28" />
<img width="1039" height="458" alt="image" src="https://github.com/user-attachments/assets/bc5d3ae2-6959-424d-9f4c-2edce531ae50" />

# 하드웨어
솔리드웍스로 기판, 바퀴, 모터가드, 기어, 베어링 직접 설계

MCU 및 메인보드, 센서보드, 모터드라이버에 사용되는 부품 직접 납땜하여 제작

MCU - TMS320F2809

메인보드 – cpu를 장착할 보드 및 중심이 되는 보드. 필터 및 레귤레이터, 트랜지스터 등을 점프선을 적게 쓰고, 최대한 작게 만들도록 부품을 배치

센서보드 – 수발광을 달아서 수광값을 받을 보드

모터드라이버 - 모터 제어

배터리 – 4.2V  4cell 2set

밑판 – 좁고 길게 설계

# 소프트웨어

MAX232로 전압신호를 맞춰서 RS232를 통해 RealDSP로 MCU를 제어하기 위한 모니터프로그램 탑재 후 컴퓨터와 통신을 통해 프로그램 다운로드.
스위치를 통해 프로그램 메뉴 진입 및 제어.

0. 메뉴
1. 수발광값이 잘 나오는지 확인 (0~4095)
2. max-min: 경기장에서 어두운곳에서 min값을 받고, 흰색 라인에서 max값을 받음
3. 128등분: max-min값을 받아서 그 사이값을 128등분 해서 수광값이 0~127 사이의 값으로 나오게 하여 수광값의 정확도를 높임  (값이 튈 수 있으니 임계값을 설정해서 임계값보다 작으면 0으로 처리)
4. Position: PID제어를 통해 중앙센서가 수광값이 높게 나오는 흰색라인을 따라가게 만듦 
5. QEP: 엔코더를 이용해서 이동거리를 계산
6. 영제어: 속도가 0일 때 모터가 안움직이도록 PID제어
7. 모터제어: 속도로 모터제어
8. 스타트엔드마크, 턴마크, 크로스마크 체크: 가로세로 선이 있을때 마크종류 확인 
9. 1차주행: 턴마크가 어디있는지 몇 개있는지 체크하는 주행
10. 2차주행: 직진구간 가속
11. 3차주행: 곡률이 낮은 S자 곡선구간은 직진으로 취급

# 느낀점
 로봇의 기초가 되는 하드웨어 설계 및 제작, RS232 부트로더를 통한 모니터프로그램 설치 부터 사용자 프로그램 컴파일 후 플래시 메모리에 설치를 통한 I/O제어, PID제어, 센서값 필터링, 유지 및 보수까지 전체적인 과정을 직접 해볼 수 있는 경험을 할 수 있었기에 로봇에 대한 이해도가 높아질 수 있었다. 로봇의 속도를 극한으로 올리기 위해 하드웨어의 정밀도와 설계, 여러가지 제어법을 적용할 수 있는 소프트웨어적인 방법들과 중요성을 느낄 수 있었다. 
